<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>HRM Fiddle</title>
  <link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/css/bootstrap.min.css" rel="stylesheet" integrity="sha256-MfvZlkHCEqatNoGiOXveE8FIwMzZg4W85qfrfIFBfYc= sha512-dTfge/zgoMYpP7QbHy4gWMEGsbsdZeCXz7irItjcC3sPUFtf0kuFbDz/ixG7ArTxmDjLXDmezHubeNikyKGVyQ==" crossorigin="anonymous">
  <link href="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.8.0/codemirror.min.css" rel="stylesheet" type="text/css">
  <link href="https://fonts.googleapis.com/css?family=Passion+One" rel="stylesheet" type="text/css">
  <link href="hrmfiddle-dist.min.css" rel="stylesheet" type="text/css">

  <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
  <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
  <!--[if lt IE 9]>
    <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
    <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
  <![endif]-->
</head>
<body>
<nav class="navbar navbar-default navbar-fixed-top">
  <div class="container-fluid">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar-collapse" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="#">HRM Fiddle</a>
    </div>
    <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
      <ul class="nav navbar-nav">
        <li><a id="load" href="#" data-toggle="modal" data-target="#loadModal">Load</a></li>
        <li class="active"><a href="#">Edit <span class="sr-only">(current)</span></a></li>
        <!--<li><a href="#">Open</a></li>-->
        <li><a id="save" href="#" data-toggle="modal" data-target="#saveModal">Save</a></li>
        <!--<li><a id="share" href="#">Share</a></li>-->
      </ul>
      <div class="nav navbar-nav btn-toolbar command-toolbar">
        <button type="button" id="view" class="btn btn-default" title="View" data-toggle="button" aria-pressed="false" autocomplete="off"><i class="glyphicon glyphicon-eye-open"></i><span class="sr-only">View</span></button>
        <button type="button" id="run" class="btn btn-success" title="Play"><i class="glyphicon glyphicon-play"></i><span class="sr-only">Play</span></button>
        <button type="button" id="resume" class="btn btn-success hidden" title="Resume" disabled><i class="glyphicon glyphicon-play"></i><span class="sr-only">Resume</span></button>
        <button type="button" id="runToEnd" class="btn btn-success" title="Play to End"><i class="glyphicon glyphicon-fast-forward"></i><span class="sr-only">Play to End</span></button>
        <button type="button" id="stepInto" class="btn btn-primary" title="Step"><i class="glyphicon glyphicon-step-forward"></i><span class="sr-only">Step</span></button>
        <button type="button" id="pause" class="btn btn-warning" title="Pause" disabled><i class="glyphicon glyphicon-pause"></i><span class="sr-only">Pause</span></button>
        <button type="button" id="stop" class="btn btn-danger" title="Stop" disabled><i class="glyphicon glyphicon-stop"></i><span class="sr-only">Stop</span></button>
      </div>
      <ul class="nav navbar-nav navbar-right">
        <li><a href="#" data-toggle="modal" data-target="#aboutModal">About</a></li>
        <li><a href="#" data-toggle="modal" data-target="#helpModal">Help</a></li>
      </ul>
    </div><!-- /.navbar-collapse -->
  </div>

  <div class="progress hrmfiddle-edit-state">
    <div id="edit-state" class="progress-bar progress-bar-primary" role="progressbar" aria-valuenow="100" aria-valuemin="0" aria-valuemax="100" style="width: 100%"></div>
  </div>
</nav>

<div id="layout" class="split-pane fixed-left">
  <div id="code-pane" class="split-pane-component">
    <div class="cm-wrap">
      <div class="cm-border">
        <div id="error-panel">
          <div class="alert alert-dismissable alert-danger hidden" role="alert" id="error">
            <!--<button type="button" class="close" data-dismiss="alert" aria-label="Close">
              <span aria-hidden="true">&times;</span>
            </button>-->
            <p id="error-content"></p>
          </div>
        </div>
        <div class="hrmcode hidden" id="code-view">Loading View...</div>
        <textarea id="editor">-- HUMAN RESOURCE MACHINE PROGRAM --

a:
    INBOX
    ADD 9
    COPYTO 0
    BUMPUP 0
    COPYFROM [8]
    OUTBOX
    JUMP a
</textarea>
      </div>
    </div>
  </div>

  <div id="divider" class="split-pane-divider"></div>

  <div id="other-pane" class="split-pane-component">
    <div class="container-fluid">

      <div class="level-select-area col-lg-12 col-md-12 col-sm-12">
        <div class="form-group">
          <div class="input-group">
            <div class="input-group-addon">Level</div>
            <select id="level-selector" class="form-control">
              <option value="0" selected>0: HRM Fiddle Sandbox</option>
            </select>
          </div>
        </div>
        <blockquote>
          <p id="level-instructions">Play around until stuff works, or doesn't.</p>
        </blockquote>
      </div>

      <div class="inputs col-lg-6 col-md-6 col-sm-12">
       <h4>Inbox <small>[<a href="#edit">edit</a>]</small></h4>
       <!--<ul id="inbox-view" class="list-unstyled">
         <li><span class="label label-success">1</span></li>
         <li><span class="label label-success">2</span></li>
         <li><span class="label label-success">3</span></li>
         <li><span class="label label-success">4</span></li>
       </ul>-->
       <textarea id="inbox" class="form-control" rows="5" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false">1
2
3
4
</textarea>
      </div>
      <div class="outputs col-lg-6 col-md-6 col-sm-12">
        <h4>Outbox <small id="stats"></small></h4>
        <ul id="outbox" class="list-unstyled">
        </ul>
      </div>
    </div>

    <div class="container-fluid">
      <div class="floor col-lg-6 col-md-6 col-sm-12">
        <h4>Floor State<small id="stats"></small></h4>
        <div id="handState"></div>
        <table id="floorState">
          
        </table>
      </div>

      <div class="inputs col-lg-6 col-md-6 col-sm-12">
        <h4>Floor <small>JSON</small></h4>
        <textarea id="variables" class="form-control" rows="5"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false">{
"8": 0,
"9": -3
}</textarea>
      </div>
    </div>
  </div>
</div>

<!-- Save Modal -->
<div class="modal fade" id="saveModal" tabindex="-1" role="dialog" aria-labelledby="saveModalLabel">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
        <h4 class="modal-title" id="saveModalLabel">Save HRM Fiddle</h4>
      </div>
      <div class="modal-body">
        <input id="save-name" type="text" class="form-control" placeholder="Solution Name...">
        <div id="save-errors"></div>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
        <button id="do-save" type="button" class="btn btn-primary">Save</button>
      </div>
    </div>
  </div>
</div>

<!-- Load Modal -->
<div class="modal fade" id="loadModal" tabindex="-1" role="dialog" aria-labelledby="loadModalLabel">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
        <h4 class="modal-title" id="loadModalLabel">Load HRM Fiddle</h4>
      </div>
      <div class="modal-body">
        <div class="load-saves-box">
          <ul id="saves-to-load"></ul>
        </div>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
      </div>
    </div>
  </div>
</div>

<!-- View Code Modal -->
<div class="modal fade" id="viewModal" tabindex="-1" role="dialog" aria-labelledby="viewModalLabel">
  <div class="modal-dialog" role="document">
    <div class="modal-content modal-lg">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
        <h4 class="modal-title" id="viewModalLabel">Code Visualizer</h4>
      </div>
      <div class="modal-body">
        <div class="hrmcode" id="code-view">Loading View...</div>
      </div>
    </div>
  </div>
</div>

<!-- About Modal -->
<div class="modal fade" id="aboutModal" tabindex="-1" role="dialog" aria-labelledby="aboutModalLabel">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
        <h4 class="modal-title" id="aboutModalLabel">About HRM Fiddle</h4>
      </div>
      <div class="modal-body">
        <p>I don't work for <a href="http://tomorrowcorporation.com">Tommorow Corporation</a>,
          nor did I work on <a href="http://tomorrowcorporation.com/humanresourcemachine">Human Resource Machine</a>. But I sure do love the game.</p>
        <p>HRM Fiddle provides a sandbox to try and share programs. Tomorrow Corporation didn't sponsor this, nor condone it, nor are they likely aware of it.</p>
        <p><a href="https://github.com/sixlettervariables/hrmsandbox">HRM Fiddle</a> by <a href="mailto:Christopher.watford@gmail.com">Christopher A. Watford</a></p>
        <p><b><i class="glyphicon glyphicon-eye-open"></i> View</b> provided by <a href="https://github.com/AlanDeSmet/human-resource-machine-viewer">Human Resource Machine Viewer</a></p>
        <p><b>Split Panes</b> provided by <a href="https://github.com/shagstrom/split-pane">Simon Hagström's Split Pane</a> project.</p>
        <p><b>Level Data</b>, <b>Inbox Generator</b>, and <b>Outbox Generator</b> provided by <a href="https://github.com/atesgoral">Ates Goral</a>.</p>
      </div>
    </div>
  </div>
</div>

<!-- Help Modal -->
<div class="modal fade" id="helpModal" tabindex="-1" role="dialog" aria-labelledby="helpModalLabel">
  <div class="modal-dialog" role="document">
    <div class="modal-content modal-lg">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
        <h4 class="modal-title" id="helpModalLabel">Help</h4>
      </div>
      <div class="modal-body">
        <div class="help">
          <h2>FAQ</h2>
          <dl>
            <dt>Where are my saves?</dt>
            <dd>Saves are persisted to <code>localStorage</code>, so basically
            only in your current browser.</dd>
            <dt>What about saving to The Cloud<sup>&#8482;</sup>?</dt>
            <dd>Soon.</dd>
          </dl>
          <h2>Instruction Set</h2>
          <table class="table table-striped small"><thead>
          <tr>
          <th>Instruction</th>
          <th>Description</th>
          </tr>
          </thead><tbody>
          <tr>
          <td><code>INBOX</code></td>
          <td>Takes the value from the top of the inbox and places it in your hand</td>
          </tr>
          <tr>
          <td><code>OUTBOX</code></td>
          <td>Takes the value from your hand and places it on the top of the inbox</td>
          </tr>
          <tr>
          <td><code>COPYTO 4</code></td>
          <td>Copies the value in your hand into <code>4</code></td>
          </tr>
          <tr>
          <td><code>COPYFROM 4</code></td>
          <td>Copies the value from <code>4</code> into your hand</td>
          </tr>
          <tr>
          <td><code>COPYFROM [1]</code></td>
          <td>Copies the value from the location pointed to by <code>1</code> into your hand</td>
          </tr>
          <tr>
          <td><code>ADD 2</code></td>
          <td>Adds the value in your hand to the value in <code>2</code></td>
          </tr>
          <tr>
          <td><code>SUB 3</code></td>
          <td>Subtracts from the value in your hand the value in <code>3</code></td>
          </tr>
          <tr>
          <td><code>BUMPUP 1</code></td>
          <td>Increments the value in <code>1</code> by one (1), saving it into <code>1</code> and your hand</td>
          </tr>
          <tr>
          <td><code>BUMPDN 0</code></td>
          <td>Decrements the value in <code>0</code> by one (1), saving it into <code>0</code> and your hand</td>
          </tr>
          <tr>
          <td><code>JUMP label</code></td>
          <td>Jumps to <code>label</code></td>
          </tr>
          <tr>
          <td><code>JUMPZ label</code></td>
          <td>Jumps to <code>label</code> if the value in your hand is zero (0)</td>
          </tr>
          <tr>
          <td><code>JUMPN label</code></td>
          <td>Jumps to <code>label</code> if the value in your hand is negative</td>
          </tr>
          </tbody>
          </table>
        </div>
      </div>
    </div>
  </div>
</div>

<script src="https://code.jquery.com/jquery-2.1.4.min.js" type="text/javascript"></script>
<script src="https://code.jquery.com/jquery-migrate-1.2.1.js" type="text/javascript"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/js/bootstrap.min.js" type="text/javascript"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.8.0/codemirror.min.js" type="text/javascript" charset="utf-8"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.8.0/addon/selection/mark-selection.min.js" type="text/javascript"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.8.0/addon/selection/active-line.min.js" type="text/javascript"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.8.0/addon/mode/simple.min.js" type="text/javascript"></script>
<script src="hrmfiddle-dist.js" type="text/javascript"></script>
<script type="text/javascript">
var controller = new Controller('editor');
$(document).ready(function () {

  controller.setCodeViewer('code-view', $('#viewModal'));

  controller.bindVisuals();

});
</script>
</body>
</html>
